<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>İletişim</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .error { color: red; font-size: 14px; }
  </style>
</head>
<body class="bg-default">

<div class="container mt-5" id="app">
  <h2 class="text-center mb-4">İletişim Formu</h2>

  <!-- Vue hata mesajı -->
  <p class="text-danger" v-if="formError">{{ formError }}</p>

  <form action="goster.php" method="POST" @submit="return validateVueForm()">
    <div class="mb-3">
      <label>Ad Soyad</label>
      <input type="text" class="form-control" name="ad" v-model="ad">
    </div>

    <div class="mb-3">
      <label>Email</label>
      <input type="text" class="form-control" name="email" v-model="email">
    </div>

    <div class="mb-3">
      <label>Telefon</label>
      <input type="text" class="form-control" name="telefon" v-model="telefon">
    </div>

    <div class="mb-3">
      <label>Cinsiyet</label><br>
      <label><input type="radio" name="cinsiyet" value="Erkek" v-model="cinsiyet"> Erkek</label>
      <label class="ms-3"><input type="radio" name="cinsiyet" value="Kadın" v-model="cinsiyet"> Kadın</label>
    </div>

    <div class="mb-3">
      <label>Şehir</label>
      <select class="form-control" name="sehir" v-model="sehir">
        <option disabled value="">Seçiniz</option>
        <option>Osmaniye</option>
        <option>İstanbul</option>
        <option>Ankara</option>
      </select>
    </div>

    <div class="mb-3">
      <label>Mesajınız</label>
      <textarea class="form-control" name="mesaj" rows="4" v-model="mesaj"></textarea>
    </div>

    <!-- JS Kontrol Butonu -->
    <button type="button" class="btn btn-warning me-2" onclick="classicValidation()">JS ile Kontrol Et</button>

    <!-- Vue submit -->
    <button type="submit" class="btn btn-primary me-2">Gönder</button>

    <button type="reset" class="btn btn-secondary" @click="clearForm()">Temizle</button>
  </form>
</div>

<!-- JS ile Kontrol -->
<script>
function classicValidation() {
  const email = document.querySelector('[name="email"]').value.trim();
  const telefon = document.querySelector('[name="telefon"]').value.trim();
  let error = "";

  const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/i;
  const phonePattern = /^[0-9]{10,15}$/;

  if (!email || !emailPattern.test(email)) {
    error += "- Geçerli bir e-mail giriniz.\n";
  }

  if (!telefon || !phonePattern.test(telefon)) {
    error += "- Telefon sadece rakam olmalı (10-15 hane).\n";
  }

  if (error) {
    alert("Hatalar:\n" + error);
  } else {
    alert("JS kontrolü başarılı!");
  }
}
</script>

<!-- Vue.js ile Kontrol -->
<script>
new Vue({
  el: '#app',
  data: {
    ad: '',
    email: '',
    telefon: '',
    cinsiyet: '',
    sehir: '',
    mesaj: '',
    formError: ''
  },
  methods: {
    clearForm() {
      this.ad = this.email = this.telefon = this.cinsiyet = this.sehir = this.mesaj = '';
      this.formError = '';
    },
    validateVueForm() {
      const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/i;
      const phonePattern = /^[0-9]{10,15}$/;

      if (!this.ad || !this.email || !this.telefon || !this.cinsiyet || !this.sehir || !this.mesaj) {
        this.formError = "Lütfen tüm alanları doldurun.";
        return false;
      }

      if (!emailPattern.test(this.email)) {
        this.formError = "Geçerli bir e-mail adresi giriniz (örnek: ad@site.com).";
        return false;
      }

      if (!phonePattern.test(this.telefon)) {
        this.formError = "Telefon sadece rakamlardan oluşmalı ve 10-15 hane olmalı.";
        return false;
      }

      this.formError = '';
      return true; // Form gönderilsin
    }
  }
});
</script>

</body>
</html>
